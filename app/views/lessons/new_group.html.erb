<h2>
  Start Group Lesson
</h2>
<% if @lesson && @lesson.errors.any? %>
  <div id="error_explanation">
    <div class="alert alert-danger">
      The form contains <%= pluralize(@lesson.errors.count, "error") %>.
    </div>
    <ul>
    <% @lesson.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end %>
<table class="stdnt">
  <tr>
    <th></th>
  	<th>F Name</th>
    <th>L Name</th>
    <th>School</th>
    <th>Instrument</th>
    <th>Books</th>
	</tr>
  <% @students.each do |student| %> 
    <tr>
      <%= form_for(@lesson, url: '/lessons') do |lesson| %>
        <td><input type="checkbox"></td>
        <td><%= student.first_name %></td>
        <td><%= student.last_name %></td>
        <td><%= student.school.name %></td>
        <%= lesson.hidden_field(student.first_name, value: student.first_name)%>
        <%= lesson.hidden_field(student.last_name, value: student.last_name)%>
        <%= lesson.hidden_field(student.school.name, value: student.school.name)%>
        <td>
          <div class="inline">
            <div class="radio-withlabel">
              <%= lesson.radio_button :brought_instrument, true, checked: true %>
              <label>Yes</label>
            </div>
            <div class="radio-withlabel">
              <%= lesson.radio_button :brought_instrument, false %>
              <label>No</label>
            </div>
          </div>
        </td>
        <td>
          <div class="inline">
            <div class="radio-withlabel">
              <%= lesson.radio_button :brought_books, true, checked: true %>
              <label>Yes</label>
            </div>
            <div class="radio-withlabel">
              <%= lesson.radio_button :brought_books, false %>
              <label>No</label>
            </div>
          </div>
        </td>
      <% end %>
    </tr> 
  <% end %>
  <tr>
  <td></td>
  <%= form_for(@lesson, url: students_path) do |lesson| %>
    <%= fields_for @lesson.student do |student| %>
      <td>
        <%= student.text_field :first_name, class: "fname", placeholder: 'Enter new...' %>
      </td>
      <td>
        <%= student.text_field :last_name, class: "lname", placeholder: "..student..." %>
      </td>
      <!-- restrict to activated schools only, default is "choose school -->
    <% end %>
    <td>
      <%= lesson.collection_select :school_id, School.where(activated: true).order(:name),:id,:name, :prompt => "School..." %>
    </td>
    <td>
      <div class="inline">
        <div class="radio-withlabel">
          <%= lesson.radio_button :brought_instrument, true, checked: true %>
          <label>Yes</label>
        </div>
        <div class="radio-withlabel">
          <%= lesson.radio_button :brought_instrument, false %>
          <label>No</label>
        </div>
      </div>
    </td>
    <td>
      <div class="inline">
        <div class="radio-withlabel">
          <%= lesson.radio_button :brought_books, true, checked: true %>
          <label>Yes</label>
        </div>
        <div class="radio-withlabel">
          <%= lesson.radio_button :brought_books, false %>
          <label>No</label>
        </div>
      </div>
    </td>
    <td><%= lesson.submit "Add Student", class: "delete" %></td>
  <% end %>
  </tr>
  <tr>
    <td colspan="6" style="text-align: center"><button style="width: 100%">Start Lesson</button></td>
  </tr>
</table>
